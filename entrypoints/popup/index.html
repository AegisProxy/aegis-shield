<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="defaultTitle" content="Aegis Shield - PII Scrubber" />
  <title>Aegis Shield</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body class="bg-background text-foreground font-sans antialiased min-w-[300px] min-h-[340px] max-w-[340px]">
  <div class="flex flex-col gap-3 p-3">
    <header class="relative flex flex-col gap-0.5 border-b border-border pb-2">
      <div class="flex items-start justify-between gap-2">
        <div>
          <h1 class="text-base font-semibold tracking-tight">Aegis Shield</h1>
          <p class="text-xs text-muted-foreground">Scrub PII before AI, or restore after</p>
        </div>
        <button type="button" id="ai-toggle" class="hidden shrink-0 px-3 py-1.5 text-xs font-medium cursor-pointer hover:opacity-80 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring transition-colors origin-center">
          AI
        </button>
      </div>
    </header>
    <main class="flex flex-col gap-3">
      <div class="relative">
        <textarea
          id="input"
          placeholder="Paste prompt to scrub, or AI response with [EMAIL], [PHONE] to restore"
          class="min-h-[90px] w-full rounded-md border border-input bg-background px-2.5 py-2 pr-20 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 resize-y"
        ></textarea>
        <button
          id="paste"
          type="button"
          class="absolute right-2 top-2 rounded border border-input bg-muted px-2 py-1 text-xs font-medium hover:bg-accent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
        >
          Paste
        </button>
      </div>
      <div id="hold-download-area" class="flex flex-col gap-1">
        <div id="hold-btn-container" class="flex flex-col gap-1">
          <button
            id="hold-download-btn"
            type="button"
            class="relative select-none overflow-hidden rounded-md border border-input bg-muted px-3 py-2.5 text-xs font-medium hover:bg-accent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 active:bg-accent/80"
          >
            <span id="hold-btn-text" class="relative z-10">Hold to download</span>
            <span id="hold-btn-fill" class="absolute inset-y-0 left-0 z-0 bg-primary/30 transition-[width] duration-75 ease-linear" style="width: 0%"></span>
          </button>
          <p class="text-[10px] text-muted-foreground">AI names, orgs, locations Â· ~110MB</p>
        </div>
        <div id="slm-error" class="hidden px-2 py-1.5 text-[10px] text-red-600 dark:text-red-400"></div>
      </div>
      <div id="slm-progress" class="hidden flex flex-col gap-1">
        <div id="slm-progress-bar-container" class="h-1.5 w-full overflow-hidden rounded-full bg-muted">
          <div id="slm-progress-bar" class="h-full bg-primary transition-[width] duration-200" style="width: 0%"></div>
        </div>
        <div id="slm-status" class="text-[10px] text-muted-foreground"></div>
      </div>
      <div id="results" class="flex flex-col gap-2 p-3 hidden">
        <div id="warnings" class="flex flex-col gap-1.5"></div>
        <div class="flex gap-2">
          <button
            id="copy"
            type="button"
            class="inline-flex flex-1 items-center justify-center rounded-md bg-primary px-3 py-1.5 text-xs font-medium text-primary-foreground hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 transition-colors"
          >
            Copy scrubbed text
          </button>
          <button
            id="restore"
            type="button"
            class="inline-flex flex-1 items-center justify-center rounded-md border border-input bg-background px-3 py-1.5 text-xs font-medium hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 transition-colors"
          >
            Restore PII
          </button>
        </div>
      </div>
      <div id="empty" class="flex items-center justify-center py-4 text-xs text-muted-foreground">
        Paste or type your prompt above
      </div>
      <section class="mt-1 border-t border-border pt-2">
        <h2 class="text-[10px] font-medium uppercase tracking-wide text-muted-foreground mb-1.5">Keyboard shortcuts</h2>
        <div id="shortcuts" class="space-y-1 text-xs text-muted-foreground">
          <div class="flex justify-between gap-2 items-center">
            <span>Scrub clipboard</span>
            <kbd id="shortcut-scrub" class="rounded border border-border bg-muted px-1.5 py-0.5 font-mono text-[10px]">-</kbd>
          </div>
          <div class="flex justify-between gap-2 items-center">
            <span>Restore PII</span>
            <kbd id="shortcut-restore" class="rounded border border-border bg-muted px-1.5 py-0.5 font-mono text-[10px]">-</kbd>
          </div>
          <a href="#" id="shortcuts-link" class="inline-block mt-1 text-xs font-medium text-blue-600 hover:text-blue-700 hover:underline dark:text-blue-400 dark:hover:text-blue-300 transition-colors">Customize shortcuts</a>
        </div>
      </section>
    </main>
  </div>
  <script type="module" src="./main.ts"></script>
</body>
</html>
